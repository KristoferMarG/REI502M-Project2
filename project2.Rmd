---
title: "Project 2"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(arules)
library(funModeling)
library(RWeka)
```

### 1. Objectives

Potential benifits of finding rules.

### 2. Data set description

What is the data? 
Describe preprocessing (choices in discretization + decisions to ignore attributes)

R kóði - Data read, discretization, remove some attributes?

```{r data}


chronic <- read.arff("chronic_kidney_disease_full.arff")


#range 2-90
chronic$age <- cut(chronic$age, c(2,10,20,30,40,50,60,70,80,90) )
levels(chronic$age) <- c('2-10','10-20','20-30','30-40','40-50',
                         '50-60','60-70','70-80','80-90','90')  

#range 50-180
chronic$bp <- cut(chronic$bp, 8 )
levels(chronic$bp) <- c('50-80','80-90','90-110','110-130','130-150','150-160','160-170','170-180')  
#range 22-490
chronic$bgr <- cut(chronic$bgr, 50 )
#range 1.5-391
chronic$bu <- cut(chronic$bu, 20 )
#range 0.4-76
chronic$sc <- cut(chronic$sc, 20 )
#range 4.5-163
chronic$sod <- cut(chronic$sod, 50 )
#range 2.5-47
chronic$pot <- cut(chronic$pot, 50 )
#range 3.1-17.8
chronic$hemo <- cut(chronic$hemo, 20 )
#range 9-54
chronic$pcv <- cut(chronic$pcv, 20 )
#range 2200-26400 (wbcc í raun er um 10-15)
chronic$wbcc <- cut(chronic$wbcc, 10 )
levels(chronic$wbcc) <- c('2200-5000','5000-7000','7000-8000','8000-9000','9000-10000',
                          '10000-15000','15000-17000','17000-19000','19000-21000','21000+')  
#range 2.1-8
chronic$rbcc <- cut(chronic$rbcc, 20 )



tData <- as (chronic, "transactions")
#size(head(tData))
#LIST(head(tData, 3))

```

### 3. Rule mining process

Using apriori make lists of rules - Most support, Most confidence, Lift .....
Try out different parameters - different length for rules, different thresholds ... more?


```{r seconddata}


rules <- apriori(tData, parameter=list(support = 0.005, confidence = 0.8, minlen=2), 
                 appearance = list(rhs=c("class=ckd")))  

inspect(rules)


```

### 4. Results + Recommendations

Resulting rules: Summary (number of rules, general description), and a selection of those
you would show to a client.

Recommendations: What should the client do because of the rules discovered.



